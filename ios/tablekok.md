# iOS 앱 개발 - tableKok
네이버 예약이나, 포잉 같이 고객이 예약 할 수 있는 채널은 많지만, 그러한 예약을 통합 관리하는 솔루션은 부재했다. 그부분에서 시작한 소프트웨어고, 레스토랑에서 효율적으로 고객의 예약을 통합 관리하는 플랫폼이다. 현재 국내의 사정에서 레스토랑 예약의 70% 이상은 전화를 통해 이루어지고 있으며 이 부분에 대한 프로세스를 간소화 하기 위해 기능을 제공하고 있고, (전화오면 앱에 자동으로 뜨는 거) 고객에 대한 예약 이력을 효과적으로 확인할 수 있는 서비스이다. 저는 거기서 iOS 앱 부분을 담당하였고, 직접 서비스를 개발하고 테스트하면서 많은 것을 배울 수 있었다. 기술적으로 훌륭한 소프트웨어를 만드는 것도 중요하지만, 실제 고객의 요구사항에 부합되는 소프트웨어가 가장 중요하다는 것을 알 수 있었다.

## 패키지 관리
패키지 관리는 cocoapods과 카르테지(carthage)를 사용하였다. 코코아팟의 경우 코드를 다운 받아서 매번 새롭게 빌드를 수행하였기 때문에, 동적 라이브러리의 형태로 처리하는 카르테지를 적극적으로 이용하였고, 카르테지를 통해서 지원하지 않는 경우 코코아팟을 이용하는 형태로 구성하였다. 

## 사용 기술 
* AutoLayout
- 정의 : 다양한 해상도에 적응할 수 있는 UI를 만들기 위한 기술로, Constraint라는 위치와 크기에 대한 표시규칙을 기반으로 자동으로 레이아웃을 변경한다.

* Constraint
- 정의 : 해상도에 따라 달라지는 요소들을 무엇을 기준으로 배치할 것인가를 지정하는 규칙이다.(Align - 정렬, Pin(고정) 방법이 있다)

* REST API (Representational State Transfer)
- 정의 : ROA(Resource Oriented Architecture)를 따르는 웹 서비스 아키텍처이다. / 직관적 URI와 HTTP메소드(GET, PUT, POST, DELETE)를 이용해 객체화된 서비스에 접근하는 것
- 장점 : 사용하기 쉽다.
- 단점 : 각 서비스별로 아키텍쳐가 다르기 때문에 표준이 없어 관리가 힘들다.

* Firebase
- 정의 : 2016년 구글에서 발표한 기술로, 웹과 모바일개발에 필요한 기능을 제공하는 백엔드 서비스이다. 
- 왜 사용하였는가? : 예약 데이터에 대한 실시간 상황판 용도로 사용하고 있는데, 데이터베이스에 대한 변경이 발생했을 경우 새로고침 없이 실시간 업데이트를 해야됐고, 이부분을 소켓을 통해 직접 구현하기 보다는 빠르게 적용가능한 파이어베이스를 사용하였다. 푸시의 경우는 실시간성이 다소 떨어지는 문제가 있었다. 
- 장점 : 백엔드 서비스를 구성하기 위한 과정들을 진행해야하는 수고로움을 덜어주어, 시간을 단축할 수 있고 프론트엔드 개발에 집중할 수 있게 한다. 
- 단점 : 첫째로는 구글에 종속되어 있는 기술이라는 것이다. AWS 같이 다른 플랫폼으로 이식해야 되는 상황이 발생한다면 내부의 TCP연결을 통해 처리하는 형식으로 전환해야 되는 비용이 발생할 것이다.
- 단점을 보완하기 위한 방법 :  AWS에 대한 이전은 고려하고 있지 않았기 때문에 괜찮았다.
- 두번째 단점으로는 일반적으로 데이터베이스에 저장하는 데이터에 대해서는 중복되는 데이터들을 정규화를 통해 별도의 테이블을 분리하는 형태로 관리해야 하는데 파이어베이스의 경우, 비정규화를 기본적인 원칙으로 사용하는 것이 유리하다. 그래서 내부적으로 중복적인 데이터에 대한 스킴이 발생할 수 밖에 없었고, 이 부분을 갱신하기 위해서 처리해야 하는 로직이 복잡해졌다. 파이어베이스는 데이터자체를 JSON 형식으로 관리하는데 그 JSON 데이터가 깊이가 깊은 형태로 되어 있다면 하나의 데이터가 변경되어도, 전체를 다 긁어 오는 형태로 동작한다. 그래서 적절히 분리해주는 비정규화를 하는 것이 좋다.


* 코코아 디자인 패턴
- 정의 : 디자인패턴은 에릭감마 외 3명의 개발자가 “잘 만들어진 소프트웨어는 일련의 공통의 설계가 존재한다“하여 정리한 패턴이다. 코코아 디자인 패턴은 애플의 코코아 프레임워크에 기반을 둔 디자인패턴이다. 

- 코코아 디자인 패턴의 경우,  이벤트를 처리하기 위한 타겟-액션과, 객체의 상태 변화에 따른 통보를 받기 위한 델리게이트패턴을 통해 구성하였다. 
- 스위프트의 경우, 타겟 액션에 대한 형태보다 클로져를 통한 형태로 구성하는 것으로 적용하였고, 객체에서 전달해야 되는 상태가 많은 경우 델리게이트를 적용하는 형태로 만들었다

* Rx
- 의미 :  비동기 데이터 스트림을 처리하는 API를 제공하는 라이브러리이며, 비동기 이벤트를 마치 iterable 컬렉션처럼 간단하게 다룰 수 있게 한다. Observable 을 통해 push방식으로 비동기 데이터를 처리함으로써 리액티브한 프로그래밍을 지원힌다.
- 왜? : MVC문제점, MVVM적용 -> Rx를 적용한 MVVM의 장점
- 단점 : 어렵다. 아직도 학습을 통해 열심히 배우고 있다. 
* Rx를 적용한 MVVM : Rx를 사용하지 않을 경우, Model과 ViewModel에 대한 상호작용을 델리게이트 패턴을 통해 구현해야 되기 때문에, 부수적인 코드에 대한 부담이 많았다. 하지만 Rx는 그러한 델리게이트 관련 코드를 효과적으로 제거할 수 있었다.

* RxSwift : 함수형 프로그래밍(Reactive Programming)에 사용하는 Swift용 라이브러리로. 소스코드를 상당히 간결하게 작성할 수 있는 장점이 있다.

* 함수형 프로그래밍
- 의미 : 불변 객체( 객체가 생성된 이후에 상태가 변경되지 않는 객체)를 활용하고, 선언적인 형태의 코드를 만드는 것이 중요하다.
- 장점 : 불변 객체를 지향하고 사이드이펙트를 지양하기 때문에, 상태 변화로 인해 발생하는 문제가 적다는 것이 장점이다.
- 단점 : 기존의 코드를 작성하는 방식과 차이가 있기 때문에 적응하는데 어려움이 있었고, 진입 장벽이 상대적으로 높지 않나 라고 생각한다. 현대적인 언어들은 현재 객체 지향과 더불어 함수형 언어의 기능이 추가되고 있고, 이 부분은 이제 반드시 학습해야 하는 부분으로 인지하고 있다.

* 함수형 언어(Swift!)
- 특징 : 다양한 얘기들이 있는데, 현재 제가 느끼고 있는 부분은 함수를 일급 객체로 다룰 수 있는 것이 중요하다고 생각한다. 함수를 일급 객체로 취급한다는 것은, 함수를 인자로 전달하고, 함수를 반환하고, 함수를 변수에 저장하는 형태의 코드로 문제를 해결할 수 있다.
