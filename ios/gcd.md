# GCD (Grand Central Dispatch)

## What is GCD?
GCD(Grand Central Dispatch)란, C언어로 되어 있는 스레드 관리 기술로 iOS4 부터 지원하고 있는 기술로, 시스템 전체에서 스레드를 더 효율적으로 동작시키는 반면, 병렬 처리를 겸하는 애플리케이션을 더 쉽게 개발할 수 있게 해준다. 

GCD를 이용한 프로그래밍에서의 처리 효율을 향상시키고자 하는 부분을 비동기로 실행 가능한 여러 작업으로 나누어 대기열(큐)에 담는다. 작업 사이의 의존 관계(전후 관계)는 지정해야 하지만, 스레드 생성 및 스케줄링은 프로그래머가 작성하지 않아도 된다. 그런 다음에는 CPU 코어 수는 물론 다른 애플리케이션의 요청을 동적으로 판단해서 시스템이 최적의 병렬도를 결정하고 효율적으로 스케줄링해서 실행한다. 

### 동기와 비동기 
`큐(queue)`는 처리할 부분에 대해 처리를 등록하여 알맞는 스레드에서 처리되는 것이지만, GCD는 큐에 등록시 다음 실행방식 하나를 지정할 수 있다. 

* 동기
 - 큐에 처리를 등록한 스레드가 등록한 처리가 완료될때까지 대기
 - GCD 메소드는 `sync~`

* 비동기
 - 큐에 처리를 등록한 스레드가 등록한 처리가 완료될때까지 기다리지 않음
 - GCD 메소드는 `async~`

 두 방식의 차이점은 처리가 완료될 때까지 기다리냐 아니냐의 차이인데, 사실 `sync`방식은 잘못 사용하면 스레드 교착상태에 빠질 수 있어 되도록 `async`를 사용하는 것을 추천한다.

### 큐 종류
* Serial 
처리를 직렬로 실행한다. 큐의 이전작업이 완료된 후, 다음작업을 시작한다. 한번에 수행할 작업은 하나뿐이다.

* Concurrent 
처리를 병렬로 실행한다. 처리가 대기열에서 제거되는 순서는 `FIFO(First In First Out)`이지만 한번에 여러작업을 실행하고 처리가 완료되는 순서도 제멋대로이다.

### 메인큐(Main Queue)
큐 중에서도 앱 시작시 시스템에 의해 자동으로 만들어지는 메인큐라는 별도의 큐가 있다. 이는 대기열에서 등록된 작업은 메인스레드에서 직렬로 실행된다. 이는 별도의 `Serial queue`라고 말할 수 있다.

