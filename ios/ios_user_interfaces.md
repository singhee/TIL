# iOS User Interfaces: Storyboards vs. NIBs vs. Custom Code
[출처](https://www.toptal.com/ios/ios-user-interfaces-storyboards-vs-nibs-vs-custom-code)

## Storyboards
Storybaord를 만들 때는 여러 사람이 작업할 경우 conflict 발생 소지가 아주 높고, merge가 쉽지가 않기 때문에 아주 큰 한 덩어리로 만들지 말아야 한다. 기능/주제/메뉴 등등의 분류대로 분리된 여러 개의 스토리보드로 구현하면 아주 좋다. 

### Storyboard를 사용할 때

– 뷰컨트롤러들 사이에서의 이동을 주된 목적으로 하는 다수의 서로 연결된 뷰컨트롤러들의 경우.
– 네비게이션 흐름(pop, push, present, dismiss 등)을 쉽게 해줌.
– 뷰컨트롤러가 자동으로 생성되므로 alloc이나 init을 해줄 필요 없음.
– 테이블뷰 컨트롤러 이점
* 셀을 함께 디자인해서 테이블뷰와 함께 둘 수 있음.
* 여러 형태의 셀 템플릿을 디자인할 수 있음.
* Static cell 사용 가능(스토리보드에서만 가능).

### Storyboard를 사용하지 않을 때 
– 복잡한 다이나믹 레이아웃을 가진 뷰일 경우 – 코드 추천

– 뷰가 이미 xib이나 코드로 개발되어 있을 때

### Storyboard의 장점
- Performance : 최초 뷰컨트롤러 하나만 초기화된 후 나머지는 세구에가 동작할 때 동적으로 객체화 된다.
- Prototype : 스토리보드+코드 몇 줄로 빠른 목업 프로토타이핑이 가능하다.

### Storyboard의 단점
- 재사용성 : 스토리보드는 의존하는 모든 뷰 컨트롤러들과 함께 복사 혹은 이동해야 한다. 스토리보드의 나머지 기능에 의존적이기 때문에 뷰컨트롤러 하나만 뽑아내 재사용하기가 불편하다. 
- 데이터 흐름: 스토리보드는 뷰컨트롤러들 사이의 흐름을 다루지만 데이터의 흐름은 관여하지 않는다.

## NIBs

Storyboard가 NIB의 대체품은 아니다. NIB는 더욱 구체적인 UI의 구현이 가능하고, 객체지향 관점에서 뷰를 여러 분리된 모듈로 쪼개서 개발, 테스트, 디버그를 더 쉽게 해 준다. `merge conflict`에 대한 문제를 갖고 있으나 규모가 스토리보드에 비해 규모가 작다.
 

### NIB을 사용할 때

– 모달뷰
– 간단한 로그인, 회원가입 뷰
– 설정
– 팝업윈도우
– 재사용 가능한 뷰
– 재사용 가능한 테이블 셀

### NIB을 사용하지 않을 때

– 내용에 따라 변화무쌍한 레이아웃을 가진 뷰들
– 애초에 인터페이스 빌더에서 쉽게 디자인할 수 없는 뷰들
– 스토리보드에서는 단순하게 처리할 수 있는 복잡한 화면전환을 가진 뷰컨트롤러들


### NIB의 장점: 재사용성

여러 클래스에서 동일한 레이아웃을 공유할 경우 좋다. 
예) 로그인 뷰와 회원가입 뷰는 패스워드 필드 하나를 감추는 형태로 비슷한 기능과 레이아웃을 공유할 수 있다.


### NIB의 장점이자 단점: 성능

NIB은 필요할 때 로드된다. 필요할 때 외에는 메모리를 사용하지 않으나, 로드 시 지연이 있을 수 있다.


## Custom Code
Storyboard와 NIB 으로 할 수 있는 어떤 것도 코드로도 가능하다. Storyboard와 NIB으로 할 수 없는 것들은 언제나 코드로 구현할 수 있다.

### Code를 사용할 때

아래와 같은 인터페이스 디자인을 위해서는 좋은 선택이 된다

– 다이나믹(변화가 크거나 빈번한) 레이아웃
– 둥근 모서리나 그림자 등의 효과를 갖는 뷰
– NIB과 storyboard를 사용하는 것이 복잡하거나 불가능한 경우.

 
### Code를 사용하지 않을 때

보통 코드로 만든 UI는 언제나 사용되며, 좋지 않은 경우는 드믈다.
NIB과 storyboard가 테이블에 몇 가지 장점이 있지만, 코드 사용을 만류할 만한 목록에 넣을만한 합당한 단점이 없는 것 같다.

### 장점 1 : 동작방식

UI를 코드로 작성하는 법을 알면 그 이면에 어떤 일이 일어나는지 알 수 있다. (계산기는 유용하다. 하지만 계산을 어떻게 수행하는지 아는 것이 나쁜 건 아니다.) UI를 코드로 작성하면 더 많은 제어와 이해를 할 수 있고 이런 것들을 통해 당신은 더 뛰어난 개발자가 될 수 있다.

### 장점 2 : 코드만이 방법일 때

코드만이 UI 디자인에 있어 유일한 방법인 경우가 있다. 전형적인 예로, 뷰가 이리 저리 움직이는 다이나믹 레이아웃이나 내용물에 기반을 두고 변화하는 레이아웃 등이 있다.

### 장점 3 : 머지 충돌(Merge Conflicts)

NIB이나 Storyboard가 머지 충돌로 고통스러울 수 있는 반면, 코드는 분명한 문법적 의미를 갖고 있기 때문에 충돌을 해결하는 것이 그리 어렵지 않다.


### 장점 4 : 성능

성능 관점에서 storyboard와 NIB은 로드와 파싱에 오버헤드를 거치고 최종에서야 간접적으로 코드로 변환된다. 코드로 만든 UI는 이런게 필요 없다.

### 장점 5 : 재사용성

코드로 작성하는 뷰는 재사용 가능한 디자인으로 구현할 수 있다. 

예를 들면
– 두개(이상)의 뷰가 비슷한 동작을 하지만, 살짝 다른 부분이 있다. 베이스 클래스와 두개(이상)의 서브클래스로 해결할 수 있다.

– 싱글 코드 베이스지만 두개(이상)으로 커스텀된 다른 앱을 생성하려할 때  프로젝트가 두개로 분기(fork)되어야 한다.

동일한 UI 디자인 과정정은 NIB과 storyboard에서 더 복잡할 것이다. 템플릿 파일들은 상속이 불가하고, 가능한 해결책은 다음으로 제한된다:

– NIB과 storyboard 파일을 복사한다. 그 후엔 원본 파일과 관계가 없이 생명주기가 분리된다.

– 화면과 동작을 코드로 덮어 쓴다. 간단한 경우엔 작동할 것이지만, 다른 부분에 있어서는 현저한 복잡성을 가질 수 있다. 많은 부분을 코드로 오버라이드 할 경우 시각적인 디자인을 쓸모 없도록 할 것이고 이는 지속적으로 골치아프게 할 것이다. 예를 들면, 인터페이스 빌더에서 보이는 특정 컨트롤이 앱 실행 중에는 완전히 다르게 보이는 경우가 있다.

### 단점 1 : 프로토타입 제작(Prototyping)

레이아웃이 화면에 어떻게 보여지고 작동하는지 보여주기 위해 작업해야 하는 시간이 NIB과 Storyboard에 비해 오래 걸린다.

### 단점 2 : 리펙토링

누군가 오래 전에 작성한 코드를 리펙토링 하는것이 훨씬 복잡해진다. 구성요소들이 커스텀 메서드나 특정한 숫자들을 이용해 위치와 에니메이션을 결정하면 디버깅에 고통이 수반된다.




## 하나의 프로젝트, 여러가지 도구들
UI 구성에 세 개의 툴이 있다는건 행운이다. Xcode는 같은 프로젝트 내에서 동시에 “효율적”으로 사용할 수있는 이 모든 툴을 제공한다. 접근방법은 다음과 같다. 

– 연관있는 화면을 별도의 그룹으로 모으고, 각각의 그룹을 분리된 storyboard로 구현한다.
– Storyboard의 테이블뷰 컨트롤러 내에 재사용할 수 없는 테이블 셀을 디자인한다.
– NIB에 재사용 가능한 테이블 셀을 디자인한다. 이 NIB은 코드로 불러들인다.
– 커스텀 뷰, 컨트롤과 그 것들 사이의 것들을 NIB으로 디자인한다.
– 다이나믹 뷰, 일반적으로 storyboard와 NIB으로 쉽게 구현할 수 없는 뷰를 코드로 구현한다.

